<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Quality Selection Guide - OpenMPF</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Quality Selection Guide";
    var mkdocs_page_input_path = "Quality-Selection-Guide.md";
    var mkdocs_page_url = "/Quality-Selection-Guide/index.html";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> OpenMPF</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../index.html">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">General</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Release-Notes/index.html">Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../License-And-Distribution/index.html">License and Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../Acknowledgements/index.html">Acknowledgements</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Guides</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Install-Guide/index.html">Install Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Admin-Guide/index.html">Admin Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../User-Guide/index.html">User Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../OpenID-Connect-Guide/index.html">OpenID Connect Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Media-Segmentation-Guide/index.html">Media Segmentation Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Feed-Forward-Guide/index.html">Feed Forward Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Derivative-Media-Guide/index.html">Derivative Media Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Object-Storage-Guide/index.html">Object Storage Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Markup-Guide/index.html">Markup Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../TiesDb-Guide/index.html">TiesDb Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Trigger-Guide/index.html">Trigger Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Roll-Up-Guide/index.html">Roll Up Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Health-Check-Guide/index.html">Health Check Guide</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="index.html">Quality Selection Guide</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#introduction">Introduction</a></li>
    

    <li class="toctree-l3"><a href="#quality-selection-properties">Quality Selection Properties</a></li>
    

    <li class="toctree-l3"><a href="#hybrid-quality-selection">Hybrid Quality Selection</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../REST-API/index.html">REST API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Component Development</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Component-API-Overview/index.html">Component API Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../Component-Descriptor-Reference/index.html">Component Descriptor Reference</a>
                </li>
                <li class="">
                    
    <a class="" href="../CPP-Batch-Component-API/index.html">C++ Batch Component API</a>
                </li>
                <li class="">
                    
    <a class="" href="../Python-Batch-Component-API/index.html">Python Batch Component API</a>
                </li>
                <li class="">
                    
    <a class="" href="../Java-Batch-Component-API/index.html">Java Batch Component API</a>
                </li>
                <li class="">
                    
    <a class="" href="../GPU-Support-Guide/index.html">GPU Support Guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Additional Developer Resources</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Contributor-Guide/index.html">Contributor Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Development-Environment-Guide/index.html">Development Environment Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Node-Guide/index.html">Node Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../Workflow-Manager-Architecture/index.html">Workflow Manager Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../CPP-Streaming-Component-API/index.html">C++ Streaming Component API</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">OpenMPF</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Guides &raquo;</li>
        
      
    
    <li>Quality Selection Guide</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>NOTICE:</strong> This software (or technical data) was produced for the U.S. Government under contract, and is subject to the
Rights in Data-General Clause 52.227-14, Alt. IV (DEC 2007). Copyright 2024 The MITRE Corporation. All Rights Reserved.</p>
<h1 id="introduction">Introduction</h1>
<p>There are a few places in OpenMPF where the quality of a detection comes into play. Here, "detection quality" is defined
to be a measurement of how "good" the detection is that can be used to rank the detections in a track from highest to
lowest quality. In many cases, components use "confidence" as an indicator of quality; however, there are some
components that do not compute a confidence value for its detections, and there are others that compute a different
value that is a better measure of quality for that detection algorithm. As discussed in the next section, OpenMPF uses
detection quality for a variety of purposes.</p>
<h1 id="quality-selection-properties">Quality Selection Properties</h1>
<p><code>QUALITY_SELECTION_PROPERTY</code> is a string that defines the name of the property to use for quality selection. For
example, a face detection component may generate detections with a <code>DESCRIPTOR_MAGNITUDE</code> property that represents the
quality of the face embedding and how useful it is for reidentification. The Workflow Manager will search the
<code>detection_properties</code> map in each detection and track for that key and use the corresponding value as the detection
quality. The value associated with this property must be an integer or floating point value, where higher values
indicate higher quality. The one exception is that if this property is set to <code>CONFIDENCE</code>, then the <code>confidence</code> member
of each detection and track is used to determine quality.</p>
<p>The primary way in which OpenMPF uses detection quality is to determine the track "exemplar", which is the highest
quality detection in the track. For components that do not compute a quality value, or where all detections have
identical quality, the Workflow Manager will choose the first detection in the track as the exemplar.</p>
<p><code>QUALITY_SELECTION_THRESHOLD</code> is a numerical value used for filtering out low quality detections and tracks. All
detections below this threshold are discarded, and if all the detections in a track are discarded, then the track itself
is also discarded. Note that components may do this filtering themselves, while others leave it to the Workflow Manager
to do the filtering. The thresholding process can be circumvented by setting this threshold to a value less than the
lowest possible value. For example, if the detection quality value computed by a component has values in the range 0 to
1, then setting the threshold property to -1 will result in all detections and all tracks being retained.</p>
<p><code>FEED_FORWARD_TOP_QUALITY_COUNT</code> can be used to select the number of detections to include in a feed-forward track. For
example, if set to 10, only the top 10 highest quality detections are fed forward to the downstream component for that
track. If less then 10 detections meet the <code>QUALITY_SELECTION_THRESHOLD</code>, then only that many detections are fed
forward. Refer to the <a href="../Feed-Forward-Guide/index.html">Feed Forward Guide</a> for more information.</p>
<p><code>ARTIFACT_EXTRACTION_POLICY_TOP_QUALITY_COUNT</code> can be used to select the number of detections that will be used to
extract artifacts. For example, if set to 10, the detections in a track will be sorted by their detection quality value,
and then the artifacts for the 10 detections with the highest quality will be extracted. If less then 10 detections meet
the <code>QUALITY_SELECTION_THRESHOLD</code>, then only that many artifacts will be extracted.</p>
<h1 id="hybrid-quality-selection">Hybrid Quality Selection</h1>
<p>In some cases, there may be a detection property that a component would like to use as a measure of quality but it
doesn't lend itself to simple thresholding, perhaps because its value is not linearly increasing, or it is not numeric. The
component can in this case create a custom property that represents the quality of detections using a numerical value that
corresponds to the ordering of the detections from low to high quality.</p>
<p>As a simple example, a face detector might be able to calculate the face pose and would like to select for artifact
extraction the face that is closest to frontal pose, and the two that are closest to left and right profile pose. If the face
detector computes the yaw with values between -90 degrees and +90 degrees, then the numerical order of those values would
not produce the desired result. In this case, the component could create a custom detection property called <code>RANK</code>, and
assign values to that property that orders the detections from highest to lowest quality. The face detection component would
assign the highest value of <code>RANK</code> to the detection with a value of yaw closest to 0, and the detections with values of yaw
closest to +/-90 degrees would be assigned the second and third highest values of <code>RANK</code>. Detections without the <code>RANK</code>
property would be treated as having the lowest possible quality value. Thus, the track exemplar would be the face with the
frontal pose, and the <code>ARTIFACT_EXTRACTION_POLICY_TOP_QUALITY_COUNT</code> property would be set to 3, so that the frontal and
two profile pose detections would be kept as track artifacts in addition to the exemplar.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../REST-API/index.html" class="btn btn-neutral float-right" title="REST API">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Health-Check-Guide/index.html" class="btn btn-neutral" title="Health Check Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>OpenMPF</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Health-Check-Guide/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../REST-API/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../js/mustache.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
